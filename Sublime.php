#!/usr/bin/env php
<?php
require __DIR__.DIRECTORY_SEPARATOR.'/vendor/autoload.php';
define("ROOT_COMPILER",__DIR__);
echo "\033[1;36m\n";
echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—\n";
echo "â•‘ ðŸš€ PHP Sublime - Route Compiler          â•‘\n";
echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n";
echo "\033[0m";


$start = microtime(true);
$stats = \App\Sublime\Compiler::compile();
$time = round(microtime(true) - $start, 3);

// Visual output
echo "\n\033[1;37mCompilation Results:\033[0m\n";
echo "â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n";
echo "â”‚ \033[1;33mMethod\033[0m             â”‚ \033[1;33mRoutes Found\033[0m â”‚\n";
echo "â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\n";
foreach ($stats['methods'] as $method => $count) {
    printf("â”‚ %-22s â”‚ \033[32m%13d\033[0m â”‚\n", $method, $count);
}
echo "â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\n";
printf("â”‚ \033[1;33mTotal Routes\033[0m       â”‚ \033[1;32m%13d\033[0m â”‚\n", $stats['total']);
echo "â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\n";
printf("â”‚ \033[1;33mParameterized Routes\033[0mâ”‚ \033[33m%13d\033[0m â”‚\n", $stats['parameterized']);
echo "â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\n";
printf("â”‚ \033[1;33mCompilation Time\033[0m   â”‚ \033[36m%10.3f sec\033[0m â”‚\n", $time);
echo "â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n";

echo "\n\033[1;32mâœ“ Successfully compiled to compiled_routes.php\033[0m\n";
echo "\033[3;90m" . date('Y-m-d H:i:s') . "\033[0m\n";